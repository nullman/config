#!/usr/bin/env bash
#===============================================================================
# .wm-applications-machine
#
# Launch machine-specific window manager applications.
#===============================================================================

# check if executable command is found in the path
_command() {
    command -v "$1" >/dev/null 2>&1
}

# run executable command if found in the path
_run() {
    command -v "$1" >/dev/null 2>&1 && "$@"
}

# run executable command if found in the path and not already running
_once() {
    if command -v "$1" >/dev/null 2>&1 && ! pidof -q "$1" ; then
        "$@" &
    fi
}

# delay running a command (SECONDS COMMAND)
_delay() {
    local delay=$1
    shift
    sleep ${delay} && eval "$@"
}

# run background applications and services
_once xscreensaver -no-splash &
#_once xautolock -time 30 -locker blurlock & # lock screen after 30 minutes
_once xautolock -time 30 -locker 'xscreensaver-command -lock' & # lock screen after 30 minutes
#_once mpd ${HOME}/.mpd/mpd.conf &
#_once dropbox start &
#_once barriers --config ${HOME}/.barrier.conf &
#_once barrierc SERVER &
#_once emacs --daemon &

# delay so that networking has time to connect
#_delay 10

# run foreground applications
#_once && alacritty -e ${HOME}/bin/run-screen &
#_delay 1 _once emacs &
##_delay 1 _once thunderbird &
#_delay 1 _once betterbird &
#_delay 1 _once brave &
##_delay 1 _once firefox &
##_delay 1 _once vivaldi &
##_delay 1 _once chromium &
#_delay 1 _once thunar &
##_delay 1 _once pcmanfm &
##_delay 1 _once spacefm &
#_delay 1 _once slack &
#_delay 10 _once discord &
##_delay 1 _once tootle &
##_delay 1 _once com.github.bleakgrey.tootle &
#_delay 1 _once nheko &
##_delay 1 _once element-desktop &
#_delay 10 _once dev.geopjr.Tuba &
#_delay 20 _once gajim &
##_delay 20 _once pidgin &
##_delay 10 _once idea &
##_delay 1 _once google-chrome &
##_delay 1 _once google-chrome-stable &
##_delay 1 _once syncterm &

# run application launcher
_run ${HOME}/bin/application-launcher &

#===============================================================================
# End of File
#===============================================================================
