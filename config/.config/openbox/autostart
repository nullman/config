#===============================================================================
# .config/openbox/autostart
#
# Openbox Window Manager auto-start applications script.
#
# Reference: http://openbox.org/
#===============================================================================

# delay before launching applets
delay=2

# check if executable command is found in the path
_command() {
    command -v "$1" >/dev/null 2>&1
}

# run executable command if found in the path and not already running
_once() {
    if command -v "$1" >/dev/null 2>&1 && ! pidof -q "$1" ; then
        "$@" &
    fi
}

# source script if found in the path
_source() {
    [ -f "$1" ] && source "$@"
}

# delay running a command (SECONDS COMMAND)
_delay() {
    local delay=$1
    shift
    sleep ${delay} && eval "$@"
}

# simple x hotkey daemon
_once sxhkd -c "${HOME}/.config/sxhkd/sxhkdrc" &

# xfce settings
#_once xfsettingsd &

# ssh-agent
#_once ssh-agent &
#_once ssh-add &

# key bindings
#xmodmap "${HOME}/.xmodmaprc" &
#set-xkb &
#xbindkeys &

# gnome policykit authentation agent
[ -x /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 ] && /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 &
# gnome keyring
#eval "$(gnome-keyring-daemon --start --components=pkcs11,secrets,ssh,gpg)" &
# lx policykit authentation agent
#_once lxpolkit &

# compositor
#_once manjaro-compositor --start &
_once compton -c &

# system bar
_source "${HOME}/bin/system-bar"

# system wallpaper displays
_source "${HOME}/bin/system-wallpaper-displays"

# full-screen task-switcher
#_once skippy-xd --config "${HOME}/.config/skippy-xd/skippy-xd.rc" --start-daemon &

# localize user system folders
#_once xdg-user-dirs-gtk-update &

# enable numlock [do not use on laptops without numpads]
#_once numlockx &

# screen saver
#_once xautolock -time 30 -locker blurlock & # lock screen after 30 minutes

# tell firefox to match theme
#_once ff-theme-util &

# set cursor theme
_once fix_xcursor &

# hide mouse when not in use
_once unclutter &

# wallpaper manager
_once nitrogen --restore &

# rebuild wm menu
#sleep 10 && _once mmaker --force openbox &

# initialize custom applications
_source "${HOME}/.openbox-applications"

#===============================================================================
# End of File
#===============================================================================
